\begin{tikzpicture}[
    x=4mm,
    y=4mm,
    number/.style={
        draw,
        rectangle,
        minimum width=4mm,
        minimum height=4mm,
        fill=green!20,
        font=\small,
        inner sep=1pt
    }
]
    \setcounter{beamerpauses}{2}

    % The detector stage outputs.
    \foreach \i/\n in {0/9, 1/0, 2/3, 3/5, 4/0} {
        \node (conv 0\i) at (\i, 0) [number] {\n};
    }

    \foreach \i/\n in {0/8, 1/4, 2/4, 3/1, 4/7} {
        \node (conv 1\i) at (\i, -1) [number] {\n};
    }

    \foreach \i/\n in {0/4, 1/1, 2/2, 3/4, 4/5} {
        \node (conv 2\i) at (\i, -2) [number] {\n};
    }

    \foreach \i/\n in {0/2, 1/3, 2/3, 3/4, 4/3} {
        \node (conv 3\i) at (\i, -3) [number] {\n};
    }

    \foreach \i/\n in {0/3, 1/9, 2/6, 3/2, 4/1} {
        \node (conv 4\i) at (\i, -4) [number] {\n};
    }

    % The pooling.
    \foreach \i/\n in {0/9, 1/9, 2/5, 3/7, 4/7} {
        \node at (\i, -6) [number] {\n};
    }
    \foreach \i/\n in {0/9, 1/9, 2/5, 3/7, 4/7} {
        \node (pool 1\i) at (\i, -7) [number] {\n};
    }
    \foreach \i/\n in {0/8, 1/8, 2/4, 3/7, 4/7} {
        \node (pool 2\i) at (\i, -8) [number] {\n};
    }
    \foreach \i/\n in {0/9, 1/9, 2/9, 3/6, 4/5} {
        \node at (\i, -9) [number] {\n};
    }
    \foreach \i/\n in {0/9, 1/9, 2/9, 3/6, 4/4} {
        \node at (\i, -10) [number] {\n};
    }

    \draw [very thick] (-0.5, 0.5) rectangle (2.5, -2.5);
    \draw [path] (conv 21) -- (pool 11);

    % Downsampling.
    \foreach \i in {0, 2} {
        \foreach \j in {0, -2} {
            \draw [very thick] (\i + 0.5, \j - 6.5) rectangle (\i + 1.5, \j - 7.5);
        }
    }

    \draw [-Latex, ultra thick] (pool 24) -- (6.5, -8);

    \node at (7, -7.5) [number] {9};
    \node at (8, -7.5) [number] {7};
    \node at (7, -8.5) [number] {9};
    \node at (8, -8.5) [number] {6};
\end{tikzpicture}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../nn"
%%% End:
